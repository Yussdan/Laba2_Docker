# Laba2_Docker

Цель работы:

Написать "плохой" Dockerfile с не менее чем тремя плохими практиками.
Написать "хороший" Dockerfile, исправляющий эти практики.
Описать в README плохие практики, их исправление и влияние на результат.
Описать две плохие практики по работе с контейнерами (не связанные с Dockerfile).
(Со звездочкой) Написать "плохой" и "хороший" Docker Compose файл, исправить плохие практики и настроить изоляцию сервисов.

1. Плохой Dockerfile
    плохой dockerfile назван bad_dockerfile и имеет 3 проблемы
    1. Использование latest тега для базового образа:
        Почему плохо: Тег latest может привести к неожиданным изменениям в базовом образе, что может сломать приложение.
        Исправление: Использовать конкретную версию образа.
        Влияние: Повышение стабильности и предсказуемости сборки.
    2. Использование одного слоя для всех команд
        Почему плохо: Это создает один огромный слой, который сложно читать и поддерживать. 
        Исправление: Разделение команды на несколько RUN для улучшения читаемости и использования кэша.

    3. Хранение секретов в Dockerfile
        Почему плохо: Секреты будут видны в истории образов
        Исправление: Использовать Docker Secrets или передавать секреты через переменные окружения во время запуска контейнера.

2. Хороший Dockerfile представлен в файле good_dockerfile

3. 2 плохие практики использование контейнера.
    1. Неправильное управление  данными внутри контейнеров. 
    Очень распространённая ошибка — хранить данные, требующие сохранности, непосредственно в файловой системе контейнера. При обновлении, перезапуске или отказе контейнера все изменения, теряются. Вместо этого следует использовать volumes или привязывать директории хоста для внешнего хранения данных
    2. Запуск нескольких сервисов в одном контейнере.
    Классическим принципом работы с контейнерами является запуск одного процесса или сервиса в одном контейнере. Однако по соображениям удобства иногда объединяют несколько сервисов в одном контейнере. Это создаёт сложности с управлением жизненным циклом каждого сервиса: если один из процессов завершится аварийно, то контейнер может упасть, а отслеживать и перезапускать отдельные компоненты будет сложно. Такой подход затрудняет масштабирование и обновление, а также может привести к трудностям в мониторинге и логировании.


4. Cо звездочкой

Плохие практики и их исправления:
    1. Использование тега latest
        Почему это плохо:
            При каждом новом запуске или пересборке может подтянуться новая несовместимая версия образа.
            Версия может измениться без уведомления, что приведёт к нестабильности.
        Как влияет:
            Теперь всегда используется фиксированная версия, что предотвращает неожиданные обновления и проблемы совместимости.

    2. Хардкод конфиденциальных данных
        Почему это плохо:
            Конфиденциальные данные видны в репозитории и могут быть скомпрометированы.
        Как влияет:
            Теперь пароли и секретные данные хранятся в отдельном файле .env, который можно исключить из репозитория.

    3. Отсутствие политики перезапуска
        Почему это плохо:
            Контейнер не будет автоматически перезапущен при сбоях.
        Как влияет:
            Контейнер автоматически перезапускается при сбоях, что повышает стабильность.